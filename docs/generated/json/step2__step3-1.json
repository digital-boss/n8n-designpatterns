{"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/compare/step2...step3-1","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/compare/step2...step3-1","permalink_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/compare/digital-boss:06e7eb5...digital-boss:23518e9","diff_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/compare/step2...step3-1.diff","patch_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/compare/step2...step3-1.patch","base_commit":{"sha":"06e7eb5cb2927253d74abe775d55b527cfb3593a","node_id":"C_kwDOHw6kqtoAKDA2ZTdlYjVjYjI5MjcyNTNkNzRhYmU3NzVkNTViNTI3Y2ZiMzU5M2E","commit":{"author":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-03T15:38:49Z"},"committer":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-03T15:38:49Z"},"message":"- FakeCrm.node.ts\n  - remove (or add real) icon `icon: 'file:fakeCrm'`\n  - add generated description properties to FakeCrm class\n- Create node description in yaml for FakeCrm API\n- gen.ts: add transformer to setup display name for resources and operations from its names.\n- types.ts: make mathod and path parameters for IOperation optional. Later in this tutorial we'll bring them back and make use of them.","tree":{"sha":"fe601554d52db39398ae8f2399ac787948a14577","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/trees/fe601554d52db39398ae8f2399ac787948a14577"},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/commits/06e7eb5cb2927253d74abe775d55b527cfb3593a","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/06e7eb5cb2927253d74abe775d55b527cfb3593a","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/06e7eb5cb2927253d74abe775d55b527cfb3593a","comments_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/06e7eb5cb2927253d74abe775d55b527cfb3593a/comments","author":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"committer":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"parents":[{"sha":"de8d3ec72a6c046a6a5ee982776a84622bef6ac9","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/de8d3ec72a6c046a6a5ee982776a84622bef6ac9","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/de8d3ec72a6c046a6a5ee982776a84622bef6ac9"}]},"merge_base_commit":{"sha":"06e7eb5cb2927253d74abe775d55b527cfb3593a","node_id":"C_kwDOHw6kqtoAKDA2ZTdlYjVjYjI5MjcyNTNkNzRhYmU3NzVkNTViNTI3Y2ZiMzU5M2E","commit":{"author":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-03T15:38:49Z"},"committer":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-03T15:38:49Z"},"message":"- FakeCrm.node.ts\n  - remove (or add real) icon `icon: 'file:fakeCrm'`\n  - add generated description properties to FakeCrm class\n- Create node description in yaml for FakeCrm API\n- gen.ts: add transformer to setup display name for resources and operations from its names.\n- types.ts: make mathod and path parameters for IOperation optional. Later in this tutorial we'll bring them back and make use of them.","tree":{"sha":"fe601554d52db39398ae8f2399ac787948a14577","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/trees/fe601554d52db39398ae8f2399ac787948a14577"},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/commits/06e7eb5cb2927253d74abe775d55b527cfb3593a","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/06e7eb5cb2927253d74abe775d55b527cfb3593a","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/06e7eb5cb2927253d74abe775d55b527cfb3593a","comments_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/06e7eb5cb2927253d74abe775d55b527cfb3593a/comments","author":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"committer":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"parents":[{"sha":"de8d3ec72a6c046a6a5ee982776a84622bef6ac9","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/de8d3ec72a6c046a6a5ee982776a84622bef6ac9","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/de8d3ec72a6c046a6a5ee982776a84622bef6ac9"}]},"status":"ahead","ahead_by":1,"behind_by":0,"total_commits":1,"commits":[{"sha":"23518e90acee841708f2ea035012defd527f7268","node_id":"C_kwDOHw6kqtoAKDIzNTE4ZTkwYWNlZTg0MTcwOGYyZWEwMzUwMTJkZWZkNTI3ZjcyNjg","commit":{"author":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-03T17:51:30Z"},"committer":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-03T17:51:30Z"},"message":"Add boilerplate","tree":{"sha":"aad23985cc9bb3d50e02976a1cb45378d67c0956","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/trees/aad23985cc9bb3d50e02976a1cb45378d67c0956"},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/commits/23518e90acee841708f2ea035012defd527f7268","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/23518e90acee841708f2ea035012defd527f7268","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/23518e90acee841708f2ea035012defd527f7268","comments_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/23518e90acee841708f2ea035012defd527f7268/comments","author":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"committer":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"parents":[{"sha":"06e7eb5cb2927253d74abe775d55b527cfb3593a","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/06e7eb5cb2927253d74abe775d55b527cfb3593a","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/06e7eb5cb2927253d74abe775d55b527cfb3593a"}]}],"files":[{"sha":"afe576e8dd88380f03c2c36119d859e323375eb7","filename":"nodes/FakeCrm/FakeCrm.node.ts","status":"modified","additions":62,"deletions":8,"changes":70,"blob_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/blob/23518e90acee841708f2ea035012defd527f7268/nodes%2FFakeCrm%2FFakeCrm.node.ts","raw_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/raw/23518e90acee841708f2ea035012defd527f7268/nodes%2FFakeCrm%2FFakeCrm.node.ts","contents_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/contents/nodes%2FFakeCrm%2FFakeCrm.node.ts?ref=23518e90acee841708f2ea035012defd527f7268","patch":"@@ -3,6 +3,7 @@ import {\n } from 'n8n-core';\n \n import {\n+\tIDataObject,\n \tINodeExecutionData,\n \tINodeType,\n \tINodeTypeDescription,\n@@ -56,18 +57,71 @@ export class FakeCrm implements INodeType {\n \t};\n \n \tasync execute(this: IExecuteFunctions): Promise<INodeExecutionData[][]> {\n+\t\tconst items = this.getInputData();\n+\t\tconst length = items.length;\n+\t\tconst returnData: IDataObject[] = [];\n \t\tconst resource = this.getNodeParameter('resource', 0) as typeof resourcesConst[number];\n \t\tconst operation = this.getNodeParameter('operation', 0) as string;\n \n-\t\t// Build Executor\n-\t\t// const httpClient = await HttpClient.create(this);\n-\t\t// const state = new State(this, nodeDescr, resource, operation);\n-\t\t// const opResolver = new ResOpResolver(operationMethods, resource, operation, fallbackOperation);\n-\t\t// const executor = new ResOpExecutor(state, opResolver, httpClient);\n-\t\tconst returnParamsExec = new ReturnParamsExecutor(new StateBase(this));\n+\t\tfor (let itemIndex = 0; itemIndex < length; itemIndex++) {\n+\t\t\ttry {\n+\t\t\t\tlet result: any;\n+\t\t\t\tswitch (resource) {\n+\t\t\t\t\tcase \"post\":\n+\t\t\t\t\t\tswitch (operation) {\n+\t\t\t\t\t\t\tcase \"create\":\n+\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\tcase \"update\":\n+\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\tcase \"get\":\n+\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\tcase \"getAll\":\n+\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\tcase \"delete\":\n+\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t}\n+\t\t\t\t\tbreak;\n \n-\t\tconst nodeExec = getNodeExecFn(returnParamsExec.execute);\n-\t\treturn nodeExec.call(this);\n+\t\t\t\t\tcase \"comment\":\n+\t\t\t\t\t\tswitch (operation) {\n+\t\t\t\t\t\t\tcase \"create\":\n+\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\tcase \"update\":\n+\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\tcase \"get\":\n+\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\tcase \"getAll\":\n+\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\tcase \"delete\":\n+\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t}\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\n+\t\t\t\tif (result.constructor === Array) {\n+\t\t\t\t\treturnData.push.apply(returnData, result);\n+\t\t\t\t} else {\n+\t\t\t\t\treturnData.push(result);\n+\t\t\t\t}\n+\t\t\t} catch (error) {\n+\t\t\t\tif (this.continueOnFail()) {\n+\t\t\t\t\treturnData.push({ error: error.message });\n+\t\t\t\t\tcontinue;\n+\t\t\t\t}\n+\t\t\t\tthrow error;\n+\t\t\t}\n+\t\t}\n+\t\treturn [this.helpers.returnJsonArray(returnData)];\n \t}\n }\n "}]}