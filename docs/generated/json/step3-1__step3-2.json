{"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/compare/step3-1...step3-2","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/compare/step3-1...step3-2","permalink_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/compare/digital-boss:23518e9...digital-boss:13f50ac","diff_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/compare/step3-1...step3-2.diff","patch_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/compare/step3-1...step3-2.patch","base_commit":{"sha":"23518e90acee841708f2ea035012defd527f7268","node_id":"C_kwDOHw6kqtoAKDIzNTE4ZTkwYWNlZTg0MTcwOGYyZWEwMzUwMTJkZWZkNTI3ZjcyNjg","commit":{"author":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-03T17:51:30Z"},"committer":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-03T17:51:30Z"},"message":"Add boilerplate","tree":{"sha":"aad23985cc9bb3d50e02976a1cb45378d67c0956","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/trees/aad23985cc9bb3d50e02976a1cb45378d67c0956"},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/commits/23518e90acee841708f2ea035012defd527f7268","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/23518e90acee841708f2ea035012defd527f7268","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/23518e90acee841708f2ea035012defd527f7268","comments_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/23518e90acee841708f2ea035012defd527f7268/comments","author":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"committer":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"parents":[{"sha":"06e7eb5cb2927253d74abe775d55b527cfb3593a","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/06e7eb5cb2927253d74abe775d55b527cfb3593a","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/06e7eb5cb2927253d74abe775d55b527cfb3593a"}]},"merge_base_commit":{"sha":"23518e90acee841708f2ea035012defd527f7268","node_id":"C_kwDOHw6kqtoAKDIzNTE4ZTkwYWNlZTg0MTcwOGYyZWEwMzUwMTJkZWZkNTI3ZjcyNjg","commit":{"author":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-03T17:51:30Z"},"committer":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-03T17:51:30Z"},"message":"Add boilerplate","tree":{"sha":"aad23985cc9bb3d50e02976a1cb45378d67c0956","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/trees/aad23985cc9bb3d50e02976a1cb45378d67c0956"},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/commits/23518e90acee841708f2ea035012defd527f7268","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/23518e90acee841708f2ea035012defd527f7268","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/23518e90acee841708f2ea035012defd527f7268","comments_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/23518e90acee841708f2ea035012defd527f7268/comments","author":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"committer":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"parents":[{"sha":"06e7eb5cb2927253d74abe775d55b527cfb3593a","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/06e7eb5cb2927253d74abe775d55b527cfb3593a","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/06e7eb5cb2927253d74abe775d55b527cfb3593a"}]},"status":"ahead","ahead_by":2,"behind_by":0,"total_commits":2,"commits":[{"sha":"a4e2db6b86e685506bf0d9b829397d4ab7b65073","node_id":"C_kwDOHw6kqtoAKGE0ZTJkYjZiODZlNjg1NTA2YmYwZDliODI5Mzk3ZDRhYjdiNjUwNzM","commit":{"author":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-03T21:10:37Z"},"committer":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-03T21:10:37Z"},"message":"Implemented with bad practices: all in one function.","tree":{"sha":"ba9c06b30c83a38b33225b5e64d3b1bb0d8e6d3f","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/trees/ba9c06b30c83a38b33225b5e64d3b1bb0d8e6d3f"},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/commits/a4e2db6b86e685506bf0d9b829397d4ab7b65073","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/a4e2db6b86e685506bf0d9b829397d4ab7b65073","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/a4e2db6b86e685506bf0d9b829397d4ab7b65073","comments_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/a4e2db6b86e685506bf0d9b829397d4ab7b65073/comments","author":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"committer":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"parents":[{"sha":"23518e90acee841708f2ea035012defd527f7268","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/23518e90acee841708f2ea035012defd527f7268","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/23518e90acee841708f2ea035012defd527f7268"}]},{"sha":"13f50acf40a51076ea7960a3b44228a30b52d6e0","node_id":"C_kwDOHw6kqtoAKDEzZjUwYWNmNDBhNTEwNzZlYTc5NjBhM2I0NDIyOGEzMGI1MmQ2ZTA","commit":{"author":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-06T15:04:25Z"},"committer":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-06T15:04:25Z"},"message":"update workflow","tree":{"sha":"41fb108238498979b310d8f0fcc88f487bf5246c","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/trees/41fb108238498979b310d8f0fcc88f487bf5246c"},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/commits/13f50acf40a51076ea7960a3b44228a30b52d6e0","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/13f50acf40a51076ea7960a3b44228a30b52d6e0","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/13f50acf40a51076ea7960a3b44228a30b52d6e0","comments_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/13f50acf40a51076ea7960a3b44228a30b52d6e0/comments","author":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"committer":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"parents":[{"sha":"a4e2db6b86e685506bf0d9b829397d4ab7b65073","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/a4e2db6b86e685506bf0d9b829397d4ab7b65073","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/a4e2db6b86e685506bf0d9b829397d4ab7b65073"}]}],"files":[{"sha":"6ae0ce5e9135dfa7784e1f4ecfd94179668ffafd","filename":"nodes/FakeCrm/FakeCrm.node.ts","status":"modified","additions":67,"deletions":11,"changes":78,"blob_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/blob/13f50acf40a51076ea7960a3b44228a30b52d6e0/nodes%2FFakeCrm%2FFakeCrm.node.ts","raw_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/raw/13f50acf40a51076ea7960a3b44228a30b52d6e0/nodes%2FFakeCrm%2FFakeCrm.node.ts","contents_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/contents/nodes%2FFakeCrm%2FFakeCrm.node.ts?ref=13f50acf40a51076ea7960a3b44228a30b52d6e0","patch":"@@ -20,7 +20,11 @@ import { resourcesConst } from './descriptions/generated/resourceOperations';\n import { ResOpExecutor, ResOpResolver } from '@digital-boss/n8n-designpatterns/dist/usecases/res-op';\n import { ReturnParamsExecutor } from '@digital-boss/n8n-designpatterns/dist/usecases';\n import { getNodeExecFn, StateBase } from '@digital-boss/n8n-designpatterns/dist';\n+import { fakeCrmRequest } from './GenericFunctions';\n \n+const getTags = (param: IDataObject): string[] => {\n+\treturn (param.tagProps as string[] || []).map((i: any) => i.tag)\n+}\n \n export class FakeCrm implements INodeType {\n \tdescription: INodeTypeDescription = {\n@@ -57,6 +61,13 @@ export class FakeCrm implements INodeType {\n \t};\n \n \tasync execute(this: IExecuteFunctions): Promise<INodeExecutionData[][]> {\n+\n+\t\t// Uncomment following lines to output app parameters with values as node execution result. Can be helpfull in debugging.\n+\t\t// const params0 = this.getNode().parameters;\n+\t\t// const paramsWithValues0 = Object.keys(params0).map(name => [name, this.getNodeParameter(name, 0)]);\n+\t\t// const res0 = Object.fromEntries(paramsWithValues0);\n+\t\t// return [this.helpers.returnJsonArray(res0)];\n+\n \t\tconst items = this.getInputData();\n \t\tconst length = items.length;\n \t\tconst returnData: IDataObject[] = [];\n@@ -65,49 +76,93 @@ export class FakeCrm implements INodeType {\n \n \t\tfor (let itemIndex = 0; itemIndex < length; itemIndex++) {\n \t\t\ttry {\n-\t\t\t\tlet result: any;\n+\t\t\t\tlet method: string = 'GET';\n+\t\t\t\tlet path: string = '/';\n+\t\t\t\tlet body: IDataObject = {};\n+\n+\t\t\t\tlet id: string = '';\n+\t\t\t\tlet postId: string = '';\n+\t\t\t\tlet tags: string[] = [];\n+\n \t\t\t\tswitch (resource) {\n \t\t\t\t\tcase \"post\":\n \t\t\t\t\t\tswitch (operation) {\n \t\t\t\t\t\t\tcase \"create\":\n-\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tmethod = 'POST';\n+\t\t\t\t\t\t\t\tpath = '/post';\n+\t\t\t\t\t\t\t\tconst tagsColl1 = this.getNodeParameter('tags', itemIndex) as IDataObject;\n+\t\t\t\t\t\t\t\ttags = getTags(tagsColl1);\n+\t\t\t\t\t\t\t\tbody = Object.assign({},\n+\t\t\t\t\t\t\t\t\tthis.getNodeParameter('additionalFields', itemIndex) as IDataObject,\n+\t\t\t\t\t\t\t\t\t{tags}\n+\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\tcase \"update\":\n-\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tmethod = 'PUT';\n+\t\t\t\t\t\t\t\tid = this.getNodeParameter('id', itemIndex) as string;\n+\t\t\t\t\t\t\t\tpath = `/post/${id}`;\n+\t\t\t\t\t\t\t\tconst tagsColl2 = this.getNodeParameter('tags', itemIndex) as IDataObject;\n+\t\t\t\t\t\t\t\ttags = getTags(tagsColl2);\n+\t\t\t\t\t\t\t\tbody = Object.assign({},\n+\t\t\t\t\t\t\t\t\tthis.getNodeParameter('additionalFields', itemIndex) as IDataObject,\n+\t\t\t\t\t\t\t\t\t{tags}\n+\t\t\t\t\t\t\t\t);\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\tcase \"get\":\n-\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tmethod = 'GET';\n+\t\t\t\t\t\t\t\tid = this.getNodeParameter('id', itemIndex) as string;\n+\t\t\t\t\t\t\t\tpath = `/post/${id}`;\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\tcase \"getAll\":\n-\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tmethod = 'GET';\n+\t\t\t\t\t\t\t\tpath = '/post';\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\tcase \"delete\":\n-\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tmethod = 'DELETE';\n+\t\t\t\t\t\t\t\tid = this.getNodeParameter('id', itemIndex) as string;\n+\t\t\t\t\t\t\t\tpath = `/post/${id}`;\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t}\n \t\t\t\t\tbreak;\n \n \t\t\t\t\tcase \"comment\":\n \t\t\t\t\t\tswitch (operation) {\n \t\t\t\t\t\t\tcase \"create\":\n-\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tmethod = 'POST';\n+\t\t\t\t\t\t\t\tpostId = this.getNodeParameter('postId', itemIndex) as string;\n+\t\t\t\t\t\t\t\tpath = `/post/${postId}/comment`;\n+\t\t\t\t\t\t\t\tbody = this.getNodeParameter('additionalFields', itemIndex) as IDataObject;\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\tcase \"update\":\n-\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tmethod = 'PUT';\n+\t\t\t\t\t\t\t\tpostId = this.getNodeParameter('postId', itemIndex) as string;\n+\t\t\t\t\t\t\t\tid = this.getNodeParameter('id', itemIndex) as string;\n+\t\t\t\t\t\t\t\tpath = `/post/${postId}/comment/${id}`;\n+\t\t\t\t\t\t\t\tbody = this.getNodeParameter('additionalFields', itemIndex) as IDataObject;\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\tcase \"get\":\n-\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tmethod = 'GET';\n+\t\t\t\t\t\t\t\tpostId = this.getNodeParameter('postId', itemIndex) as string;\n+\t\t\t\t\t\t\t\tid = this.getNodeParameter('id', itemIndex) as string;\n+\t\t\t\t\t\t\t\tpath = `/post/${postId}/comment/${id}`;\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\tcase \"getAll\":\n-\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tmethod = 'GET';\n+\t\t\t\t\t\t\t\tpostId = this.getNodeParameter('postId', itemIndex) as string;\n+\t\t\t\t\t\t\t\tpath = `/post/${postId}/comment`;\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t\tcase \"delete\":\n-\t\t\t\t\t\t\t\tresult = {resource, operation};\n+\t\t\t\t\t\t\t\tmethod = 'DELETE';\n+\t\t\t\t\t\t\t\tpostId = this.getNodeParameter('postId', itemIndex) as string;\n+\t\t\t\t\t\t\t\tid = this.getNodeParameter('id', itemIndex) as string;\n+\t\t\t\t\t\t\t\tpath = `/post/${postId}/comment/${id}`;\n \t\t\t\t\t\t\t\tbreak;\n \t\t\t\t\t\t}\n \t\t\t\t\tbreak;\n \t\t\t\t}\n \n+\t\t\t\tconst result = await fakeCrmRequest.call(this, method, path, body) || {};\n+\n \t\t\t\tif (result.constructor === Array) {\n \t\t\t\t\treturnData.push.apply(returnData, result);\n \t\t\t\t} else {\n@@ -121,6 +176,7 @@ export class FakeCrm implements INodeType {\n \t\t\t\tthrow error;\n \t\t\t}\n \t\t}\n+\n \t\treturn [this.helpers.returnJsonArray(returnData)];\n \t}\n }"},{"sha":"13ea4b29915680716c490cba02168cc8455e112e","filename":"nodes/FakeCrm/GenericFunctions.ts","status":"added","additions":45,"deletions":0,"changes":45,"blob_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/blob/13f50acf40a51076ea7960a3b44228a30b52d6e0/nodes%2FFakeCrm%2FGenericFunctions.ts","raw_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/raw/13f50acf40a51076ea7960a3b44228a30b52d6e0/nodes%2FFakeCrm%2FGenericFunctions.ts","contents_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/contents/nodes%2FFakeCrm%2FGenericFunctions.ts?ref=13f50acf40a51076ea7960a3b44228a30b52d6e0","patch":"@@ -0,0 +1,45 @@\n+import { OptionsWithUri } from \"request\";\n+\n+import {\n+\tIExecuteFunctions,\n+\tIExecuteSingleFunctions,\n+\tIHookFunctions,\n+\tILoadOptionsFunctions,\n+} from \"n8n-core\";\n+\n+import { IDataObject, NodeApiError, NodeOperationError } from \"n8n-workflow\";\n+import { IFakeCrmApiCredentials } from \"credentials/FakeCrmApi.credentials\";\n+\n+export async function fakeCrmRequest(\n+\tthis:\n+\t\t| IHookFunctions\n+\t\t| IExecuteFunctions\n+\t\t| IExecuteSingleFunctions\n+\t\t| ILoadOptionsFunctions,\n+\tmethod: string,\n+\tpath: string,\n+\tbody: object = {},\n+): Promise<any> {\n+\n+\tconst creds = (await this.getCredentials(\"fakeCrmApi\")) as unknown as IFakeCrmApiCredentials;\n+\n+\tif (creds === undefined) {\n+\t\tthrow new NodeOperationError(\n+\t\t\tthis.getNode(),\n+\t\t\t\"No credentials got returned!\"\n+\t\t);\n+\t}\n+\n+\tconst options: OptionsWithUri = {\n+\t\tmethod,\n+\t\tbody,\n+\t\turi: creds.host + path,\n+\t\tjson: true,\n+\t};\n+\n+\ttry {\n+\t\treturn this.helpers.request!(options);\n+\t} catch (error) {\n+\t\tthrow new NodeApiError(this.getNode(), error);\n+\t}\n+}"},{"sha":"ac4c9b3ced3a6ce8d8decaffbe678f72ec2ce4cb","filename":"workflows/test.json","status":"added","additions":321,"deletions":0,"changes":321,"blob_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/blob/13f50acf40a51076ea7960a3b44228a30b52d6e0/workflows%2Ftest.json","raw_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/raw/13f50acf40a51076ea7960a3b44228a30b52d6e0/workflows%2Ftest.json","contents_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/contents/workflows%2Ftest.json?ref=13f50acf40a51076ea7960a3b44228a30b52d6e0","patch":"@@ -0,0 +1,321 @@\n+{\n+  \"nodes\": [\n+    {\n+      \"parameters\": {},\n+      \"name\": \"Start\",\n+      \"type\": \"n8n-nodes-base.start\",\n+      \"typeVersion\": 1,\n+      \"position\": [\n+        280,\n+        220\n+      ]\n+    },\n+    {\n+      \"parameters\": {\n+        \"operation\": \"create\",\n+        \"tags\": {\n+          \"tagProps\": [\n+            {\n+              \"tag\": \"aaa\"\n+            },\n+            {\n+              \"tag\": \"bbb\"\n+            }\n+          ]\n+        },\n+        \"additionalFields\": {\n+          \"title\": \"Hello there !\",\n+          \"createTime\": \"2022-08-03T18:42:00.791Z\",\n+          \"author\": \"Me\",\n+          \"content\": \"heeey la la la\"\n+        }\n+      },\n+      \"name\": \"FakeCrm\",\n+      \"type\": \"@digital-boss/n8n-nodes-designpatterns-tutorial.fakeCrm\",\n+      \"typeVersion\": 1,\n+      \"position\": [\n+        520,\n+        220\n+      ],\n+      \"credentials\": {\n+        \"fakeCrmApi\": {\n+          \"id\": \"18\",\n+          \"name\": \"FakeCrm account\"\n+        }\n+      }\n+    },\n+    {\n+      \"parameters\": {\n+        \"resource\": \"comment\",\n+        \"operation\": \"create\",\n+        \"postId\": 11,\n+        \"additionalFields\": {\n+          \"createTime\": \"2022-08-03T20:22:05.444Z\",\n+          \"author\": \"Peter\",\n+          \"content\": \"tra ta ta ta\"\n+        }\n+      },\n+      \"name\": \"FakeCrm1\",\n+      \"type\": \"@digital-boss/n8n-nodes-designpatterns-tutorial.fakeCrm\",\n+      \"typeVersion\": 1,\n+      \"position\": [\n+        1120,\n+        220\n+      ],\n+      \"credentials\": {\n+        \"fakeCrmApi\": {\n+          \"id\": \"18\",\n+          \"name\": \"FakeCrm account\"\n+        }\n+      }\n+    },\n+    {\n+      \"parameters\": {\n+        \"operation\": \"update\",\n+        \"id\": 11,\n+        \"tags\": {\n+          \"tagProps\": [\n+            {\n+              \"tag\": \"EEEE\"\n+            }\n+          ]\n+        },\n+        \"additionalFields\": {\n+          \"title\": \"qwe\",\n+          \"author\": \"asd\",\n+          \"content\": \"zxc\"\n+        }\n+      },\n+      \"name\": \"FakeCrm2\",\n+      \"type\": \"@digital-boss/n8n-nodes-designpatterns-tutorial.fakeCrm\",\n+      \"typeVersion\": 1,\n+      \"position\": [\n+        780,\n+        220\n+      ],\n+      \"credentials\": {\n+        \"fakeCrmApi\": {\n+          \"id\": \"18\",\n+          \"name\": \"FakeCrm account\"\n+        }\n+      }\n+    },\n+    {\n+      \"parameters\": {\n+        \"operation\": \"get\",\n+        \"id\": 11\n+      },\n+      \"name\": \"FakeCrm3\",\n+      \"type\": \"@digital-boss/n8n-nodes-designpatterns-tutorial.fakeCrm\",\n+      \"typeVersion\": 1,\n+      \"position\": [\n+        780,\n+        540\n+      ],\n+      \"credentials\": {\n+        \"fakeCrmApi\": {\n+          \"id\": \"18\",\n+          \"name\": \"FakeCrm account\"\n+        }\n+      }\n+    },\n+    {\n+      \"parameters\": {},\n+      \"name\": \"FakeCrm4\",\n+      \"type\": \"@digital-boss/n8n-nodes-designpatterns-tutorial.fakeCrm\",\n+      \"typeVersion\": 1,\n+      \"position\": [\n+        780,\n+        380\n+      ],\n+      \"credentials\": {\n+        \"fakeCrmApi\": {\n+          \"id\": \"18\",\n+          \"name\": \"FakeCrm account\"\n+        }\n+      }\n+    },\n+    {\n+      \"parameters\": {\n+        \"operation\": \"delete\",\n+        \"id\": 11\n+      },\n+      \"name\": \"FakeCrm5\",\n+      \"type\": \"@digital-boss/n8n-nodes-designpatterns-tutorial.fakeCrm\",\n+      \"typeVersion\": 1,\n+      \"position\": [\n+        1460,\n+        860\n+      ],\n+      \"credentials\": {\n+        \"fakeCrmApi\": {\n+          \"id\": \"18\",\n+          \"name\": \"FakeCrm account\"\n+        }\n+      }\n+    },\n+    {\n+      \"parameters\": {\n+        \"resource\": \"comment\",\n+        \"operation\": \"update\",\n+        \"postId\": 11,\n+        \"id\": 1,\n+        \"additionalFields\": {\n+          \"createTime\": \"2022-08-03T21:00:00.000Z\",\n+          \"author\": \"tttttttt\",\n+          \"content\": \"owiefj owief jowiefj owiejoijoiwjfe\"\n+        }\n+      },\n+      \"name\": \"FakeCrm6\",\n+      \"type\": \"@digital-boss/n8n-nodes-designpatterns-tutorial.fakeCrm\",\n+      \"typeVersion\": 1,\n+      \"position\": [\n+        1120,\n+        380\n+      ],\n+      \"credentials\": {\n+        \"fakeCrmApi\": {\n+          \"id\": \"18\",\n+          \"name\": \"FakeCrm account\"\n+        }\n+      }\n+    },\n+    {\n+      \"parameters\": {\n+        \"resource\": \"comment\",\n+        \"operation\": \"get\",\n+        \"postId\": 11,\n+        \"id\": 1\n+      },\n+      \"name\": \"FakeCrm7\",\n+      \"type\": \"@digital-boss/n8n-nodes-designpatterns-tutorial.fakeCrm\",\n+      \"typeVersion\": 1,\n+      \"position\": [\n+        1120,\n+        700\n+      ],\n+      \"credentials\": {\n+        \"fakeCrmApi\": {\n+          \"id\": \"18\",\n+          \"name\": \"FakeCrm account\"\n+        }\n+      }\n+    },\n+    {\n+      \"parameters\": {\n+        \"resource\": \"comment\",\n+        \"postId\": 11\n+      },\n+      \"name\": \"FakeCrm8\",\n+      \"type\": \"@digital-boss/n8n-nodes-designpatterns-tutorial.fakeCrm\",\n+      \"typeVersion\": 1,\n+      \"position\": [\n+        1120,\n+        540\n+      ],\n+      \"credentials\": {\n+        \"fakeCrmApi\": {\n+          \"id\": \"18\",\n+          \"name\": \"FakeCrm account\"\n+        }\n+      }\n+    },\n+    {\n+      \"parameters\": {\n+        \"resource\": \"comment\",\n+        \"operation\": \"delete\",\n+        \"postId\": 11,\n+        \"id\": 1\n+      },\n+      \"name\": \"FakeCrm9\",\n+      \"type\": \"@digital-boss/n8n-nodes-designpatterns-tutorial.fakeCrm\",\n+      \"typeVersion\": 1,\n+      \"position\": [\n+        1460,\n+        700\n+      ],\n+      \"credentials\": {\n+        \"fakeCrmApi\": {\n+          \"id\": \"18\",\n+          \"name\": \"FakeCrm account\"\n+        }\n+      }\n+    }\n+  ],\n+  \"connections\": {\n+    \"Start\": {\n+      \"main\": [\n+        [\n+          {\n+            \"node\": \"FakeCrm\",\n+            \"type\": \"main\",\n+            \"index\": 0\n+          }\n+        ]\n+      ]\n+    },\n+    \"FakeCrm\": {\n+      \"main\": [\n+        [\n+          {\n+            \"node\": \"FakeCrm2\",\n+            \"type\": \"main\",\n+            \"index\": 0\n+          },\n+          {\n+            \"node\": \"FakeCrm3\",\n+            \"type\": \"main\",\n+            \"index\": 0\n+          },\n+          {\n+            \"node\": \"FakeCrm4\",\n+            \"type\": \"main\",\n+            \"index\": 0\n+          }\n+        ]\n+      ]\n+    },\n+    \"FakeCrm3\": {\n+      \"main\": [\n+        [\n+          {\n+            \"node\": \"FakeCrm1\",\n+            \"type\": \"main\",\n+            \"index\": 0\n+          },\n+          {\n+            \"node\": \"FakeCrm6\",\n+            \"type\": \"main\",\n+            \"index\": 0\n+          },\n+          {\n+            \"node\": \"FakeCrm8\",\n+            \"type\": \"main\",\n+            \"index\": 0\n+          },\n+          {\n+            \"node\": \"FakeCrm7\",\n+            \"type\": \"main\",\n+            \"index\": 0\n+          }\n+        ]\n+      ]\n+    },\n+    \"FakeCrm7\": {\n+      \"main\": [\n+        [\n+          {\n+            \"node\": \"FakeCrm9\",\n+            \"type\": \"main\",\n+            \"index\": 0\n+          },\n+          {\n+            \"node\": \"FakeCrm5\",\n+            \"type\": \"main\",\n+            \"index\": 0\n+          }\n+        ]\n+      ]\n+    }\n+  }\n+}"}]}