{"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/compare/step4-3-1...step4-3-2","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/compare/step4-3-1...step4-3-2","permalink_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/compare/digital-boss:2eca392...digital-boss:1847b52","diff_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/compare/step4-3-1...step4-3-2.diff","patch_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/compare/step4-3-1...step4-3-2.patch","base_commit":{"sha":"2eca392a2e62b3417933f9b797ab493e8dcf4074","node_id":"C_kwDOHw6kqtoAKDJlY2EzOTJhMmU2MmIzNDE3OTMzZjliNzk3YWI0OTNlOGRjZjQwNzQ","commit":{"author":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-06T15:31:10Z"},"committer":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-06T15:31:10Z"},"message":"swap args in operation: first is client.","tree":{"sha":"b5728ef2047e51b0095f7365282f96d943d2526c","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/trees/b5728ef2047e51b0095f7365282f96d943d2526c"},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/commits/2eca392a2e62b3417933f9b797ab493e8dcf4074","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/2eca392a2e62b3417933f9b797ab493e8dcf4074","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/2eca392a2e62b3417933f9b797ab493e8dcf4074","comments_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/2eca392a2e62b3417933f9b797ab493e8dcf4074/comments","author":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"committer":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"parents":[{"sha":"161bb009355b324cd07b607679f53ab5ad2bbdb6","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/161bb009355b324cd07b607679f53ab5ad2bbdb6","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/161bb009355b324cd07b607679f53ab5ad2bbdb6"}]},"merge_base_commit":{"sha":"2eca392a2e62b3417933f9b797ab493e8dcf4074","node_id":"C_kwDOHw6kqtoAKDJlY2EzOTJhMmU2MmIzNDE3OTMzZjliNzk3YWI0OTNlOGRjZjQwNzQ","commit":{"author":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-06T15:31:10Z"},"committer":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-06T15:31:10Z"},"message":"swap args in operation: first is client.","tree":{"sha":"b5728ef2047e51b0095f7365282f96d943d2526c","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/trees/b5728ef2047e51b0095f7365282f96d943d2526c"},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/commits/2eca392a2e62b3417933f9b797ab493e8dcf4074","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/2eca392a2e62b3417933f9b797ab493e8dcf4074","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/2eca392a2e62b3417933f9b797ab493e8dcf4074","comments_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/2eca392a2e62b3417933f9b797ab493e8dcf4074/comments","author":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"committer":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"parents":[{"sha":"161bb009355b324cd07b607679f53ab5ad2bbdb6","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/161bb009355b324cd07b607679f53ab5ad2bbdb6","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/161bb009355b324cd07b607679f53ab5ad2bbdb6"}]},"status":"ahead","ahead_by":2,"behind_by":0,"total_commits":2,"commits":[{"sha":"41b18b024d013ce4d59591d909dbf09628a74c43","node_id":"C_kwDOHw6kqtoAKDQxYjE4YjAyNGQwMTNjZTRkNTk1OTFkOTA5ZGJmMDk2MjhhNzRjNDM","commit":{"author":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-06T11:17:35Z"},"committer":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-06T11:17:35Z"},"message":"Extract State","tree":{"sha":"74802a4dab0a794542e46e835cbc8df1625e5174","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/trees/74802a4dab0a794542e46e835cbc8df1625e5174"},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/commits/41b18b024d013ce4d59591d909dbf09628a74c43","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/41b18b024d013ce4d59591d909dbf09628a74c43","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/41b18b024d013ce4d59591d909dbf09628a74c43","comments_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/41b18b024d013ce4d59591d909dbf09628a74c43/comments","author":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"committer":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"parents":[{"sha":"245baf1e8a806dc09c772dafe15e090c3d763abb","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/245baf1e8a806dc09c772dafe15e090c3d763abb","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/245baf1e8a806dc09c772dafe15e090c3d763abb"}]},{"sha":"1847b527dc813de36fe3b7dc595d94cefc7acde8","node_id":"C_kwDOHw6kqtoAKDE4NDdiNTI3ZGM4MTNkZTM2ZmUzYjdkYzU5NWQ5NGNlZmM3YWNkZTg","commit":{"author":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-06T15:35:15Z"},"committer":{"name":"maestrow","email":"andrew.shmelev@gmail.com","date":"2022-08-06T15:35:15Z"},"message":"Merge branch 'step4-3-1' into step4-3-2","tree":{"sha":"7a3d0fd5950bff004e709a9ef7b9e26c6f575f2d","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/trees/7a3d0fd5950bff004e709a9ef7b9e26c6f575f2d"},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/git/commits/1847b527dc813de36fe3b7dc595d94cefc7acde8","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/1847b527dc813de36fe3b7dc595d94cefc7acde8","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/1847b527dc813de36fe3b7dc595d94cefc7acde8","comments_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/1847b527dc813de36fe3b7dc595d94cefc7acde8/comments","author":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"committer":{"login":"maestrow","id":671853,"node_id":"MDQ6VXNlcjY3MTg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/671853?v=4","gravatar_id":"","url":"https://api.github.com/users/maestrow","html_url":"https://github.com/maestrow","followers_url":"https://api.github.com/users/maestrow/followers","following_url":"https://api.github.com/users/maestrow/following{/other_user}","gists_url":"https://api.github.com/users/maestrow/gists{/gist_id}","starred_url":"https://api.github.com/users/maestrow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maestrow/subscriptions","organizations_url":"https://api.github.com/users/maestrow/orgs","repos_url":"https://api.github.com/users/maestrow/repos","events_url":"https://api.github.com/users/maestrow/events{/privacy}","received_events_url":"https://api.github.com/users/maestrow/received_events","type":"User","site_admin":false},"parents":[{"sha":"41b18b024d013ce4d59591d909dbf09628a74c43","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/41b18b024d013ce4d59591d909dbf09628a74c43","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/41b18b024d013ce4d59591d909dbf09628a74c43"},{"sha":"2eca392a2e62b3417933f9b797ab493e8dcf4074","url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/commits/2eca392a2e62b3417933f9b797ab493e8dcf4074","html_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/commit/2eca392a2e62b3417933f9b797ab493e8dcf4074"}]}],"files":[{"sha":"101806ff0030ca1c4cf03418a2cc62711c7a1d21","filename":"nodes/FakeCrm/FakeCrm.node.ts","status":"modified","additions":7,"deletions":3,"changes":10,"blob_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/blob/1847b527dc813de36fe3b7dc595d94cefc7acde8/nodes%2FFakeCrm%2FFakeCrm.node.ts","raw_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/raw/1847b527dc813de36fe3b7dc595d94cefc7acde8/nodes%2FFakeCrm%2FFakeCrm.node.ts","contents_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/contents/nodes%2FFakeCrm%2FFakeCrm.node.ts?ref=1847b527dc813de36fe3b7dc595d94cefc7acde8","patch":"@@ -24,6 +24,7 @@ import { getNodeExecFn, StateBase } from '@digital-boss/n8n-designpatterns/dist'\n import { operationMethods } from './backend/operations';\n import { HttpClientBasic } from './backend/HttpClientBasic';\n import { IFakeCrmApiCredentials } from 'credentials/FakeCrmApi.credentials';\n+import { State } from './backend/State';\n \n const getTags = (param: IDataObject): string[] => {\n \treturn (param.tagProps as string[] || []).map((i: any) => i.tag)\n@@ -73,11 +74,13 @@ export class FakeCrm implements INodeType {\n \n const getItemExecutor = async (execFns: IExecuteFunctions) => {\n \n-\tconst creds = await (execFns.getCredentials('fakeCrmApi')) as unknown as IFakeCrmApiCredentials\n-\tconst httpClient = new HttpClientBasic(execFns.helpers.request, creds)\n \tconst resourceName = execFns.getNodeParameter('resource', 0) as typeof resourcesConst[number];\n \tconst operationName = execFns.getNodeParameter('operation', 0) as string;\n \n+\tconst creds = await (execFns.getCredentials('fakeCrmApi')) as unknown as IFakeCrmApiCredentials\n+\tconst httpClient = new HttpClientBasic(execFns.helpers.request, creds);\n+\tconst state = new State(execFns);\n+\n \tconst resource = operationMethods[resourceName];\n \tif (!resource) {\n \t\tthrow new NodeOperationError(execFns.getNode(), `Resource not found: ${resourceName}`);\n@@ -89,6 +92,7 @@ const getItemExecutor = async (execFns: IExecuteFunctions) => {\n \t}\n \n \treturn async (itemIndex: number): Promise<any> => {\n-\t\treturn operation(httpClient, execFns, itemIndex);\n+\t\tstate.updateIndex(itemIndex);\n+\t\treturn operation(httpClient, state);\n \t}\n }"},{"sha":"bd7f19b712c61a647378dc6467dc2259d6d3187f","filename":"nodes/FakeCrm/backend/State.ts","status":"added","additions":28,"deletions":0,"changes":28,"blob_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/blob/1847b527dc813de36fe3b7dc595d94cefc7acde8/nodes%2FFakeCrm%2Fbackend%2FState.ts","raw_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/raw/1847b527dc813de36fe3b7dc595d94cefc7acde8/nodes%2FFakeCrm%2Fbackend%2FState.ts","contents_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/contents/nodes%2FFakeCrm%2Fbackend%2FState.ts?ref=1847b527dc813de36fe3b7dc595d94cefc7acde8","patch":"@@ -0,0 +1,28 @@\n+import {\n+\tCoreOptions,\n+\tOptionsWithUri,\n+} from 'request';\n+import { IDataObject, IExecuteFunctions } from 'n8n-workflow';\n+import { IState } from './interfaces';\n+\n+/**\n+ * Access Node state, getting parameters.\n+ */\n+export class State implements IState {\n+\titemIndex = 0;\n+\texecFns: IExecuteFunctions;\n+\n+\tconstructor (\n+\t\texecFns: IExecuteFunctions,\n+\t) {\n+\t\tthis.execFns = execFns;\n+\t}\n+\n+\tupdateIndex (itemIndex: number) {\n+\t\tthis.itemIndex = itemIndex;\n+\t}\n+\n+\tgetParam (name: string): any {\n+\t\treturn this.execFns.getNodeParameter(name, this.itemIndex);\n+\t}\n+}"},{"sha":"7fd31cd924efe1f2e25b9a6ab36672a63fa277fd","filename":"nodes/FakeCrm/backend/interfaces.ts","status":"modified","additions":11,"deletions":1,"changes":12,"blob_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/blob/1847b527dc813de36fe3b7dc595d94cefc7acde8/nodes%2FFakeCrm%2Fbackend%2Finterfaces.ts","raw_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/raw/1847b527dc813de36fe3b7dc595d94cefc7acde8/nodes%2FFakeCrm%2Fbackend%2Finterfaces.ts","contents_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/contents/nodes%2FFakeCrm%2Fbackend%2Finterfaces.ts?ref=1847b527dc813de36fe3b7dc595d94cefc7acde8","patch":"@@ -3,6 +3,16 @@ import { OptionsWithUri } from 'request';\n /**\n  * Makes HTTP requests\n  */\n- export interface IHttpClient {\n+export interface IHttpClient {\n \trequest: (opts: OptionsWithUri) => Promise<any>;\n }\n+\n+/**\n+ * Interface to implement for classes dependant on execution item index.\n+ * For example, if class reads parameter: execFn.getNodeParameter('resource', itemIndex),\n+ * then it depends on itemIndex\n+ */\n+export interface IState {\n+\titemIndex: number;\n+\tupdateIndex: (itemIndex: number) => void;\n+}"},{"sha":"82ca74478f3a11d88c402b11f0097c56ef95079c","filename":"nodes/FakeCrm/backend/operations.ts","status":"modified","additions":31,"deletions":36,"changes":67,"blob_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/blob/1847b527dc813de36fe3b7dc595d94cefc7acde8/nodes%2FFakeCrm%2Fbackend%2Foperations.ts","raw_url":"https://github.com/digital-boss/n8n-nodes-designpatterns-tutorial/raw/1847b527dc813de36fe3b7dc595d94cefc7acde8/nodes%2FFakeCrm%2Fbackend%2Foperations.ts","contents_url":"https://api.github.com/repos/digital-boss/n8n-nodes-designpatterns-tutorial/contents/nodes%2FFakeCrm%2Fbackend%2Foperations.ts?ref=1847b527dc813de36fe3b7dc595d94cefc7acde8","patch":"@@ -4,8 +4,9 @@ import {\n } from 'n8n-core';\n import { IDataObject } from \"n8n-workflow\";\n import { IHttpClient } from './interfaces';\n+import { State } from './State';\n \n-type OpFn = (client: IHttpClient, execFns: IExecuteFunctions, itemIndex: number) => Promise<any>;\n+type OpFn = (client: IHttpClient, state: State) => Promise<any>;\n type OpContainer = Record<string, OpFn>\n \n const getTags = (param: IDataObject): string[] => {\n@@ -14,39 +15,33 @@ const getTags = (param: IDataObject): string[] => {\n \n const post: OpContainer = {\n \n-\tcreate: (client, execFns, itemIndex) => {\n-\t\tconst tagsColl = execFns.getNodeParameter('tags', itemIndex) as IDataObject;\n-\t\tconst tags = getTags(tagsColl);\n+\tcreate: (client, state) => {\n \t\tconst opts: OptionsWithUri = {\n \t\t\tmethod: 'POST',\n-\t\t\tbody: Object.assign({},\n-\t\t\t\texecFns.getNodeParameter('additionalFields', itemIndex) as IDataObject,\n-\t\t\t\t{tags}\n-\t\t\t),\n+\t\t\tbody: Object.assign({\n+\t\t\t\ttags: getTags(state.getParam('tags'))\n+\t\t\t}, state.getParam('additionalFields')),\n \t\t\turi: '/post',\n \t\t\tjson: true,\n \t\t}\n \t\treturn client.request(opts);\n \t},\n \n-\tupdate: (client, execFns, itemIndex) => {\n-\t\tconst id = execFns.getNodeParameter('id', itemIndex) as string;\n-\t\tconst tagsColl = execFns.getNodeParameter('tags', itemIndex) as IDataObject;\n-\t\tconst tags = getTags(tagsColl);\n+\tupdate: (client, state) => {\n+\t\tconst id = state.getParam('id');\n \t\tconst opts: OptionsWithUri = {\n \t\t\tmethod: 'PUT',\n-\t\t\tbody: Object.assign({},\n-\t\t\t\texecFns.getNodeParameter('additionalFields', itemIndex) as IDataObject,\n-\t\t\t\t{tags}\n-\t\t\t),\n+\t\t\tbody: Object.assign({\n+\t\t\t\ttags: getTags(state.getParam('tags'))\n+\t\t\t}, state.getParam('additionalFields')),\n \t\t\turi: `/post/${id}`,\n \t\t\tjson: true,\n \t\t}\n \t\treturn client.request(opts).then(res => res || {});\n \t},\n \n-\tget: (client, execFns, itemIndex) => {\n-\t\tconst id = execFns.getNodeParameter('id', itemIndex) as string;\n+\tget: (client, state) => {\n+\t\tconst id = state.getParam('id');\n \t\tconst opts: OptionsWithUri = {\n \t\t\tmethod: 'GET',\n \t\t\turi: `/post/${id}`,\n@@ -55,7 +50,7 @@ const post: OpContainer = {\n \t\treturn client.request(opts);\n \t},\n \n-\tgetAll: (client, execFns, itemIndex) => {\n+\tgetAll: (client, state) => {\n \t\tconst opts: OptionsWithUri = {\n \t\t\tmethod: 'GET',\n \t\t\turi: `/post`,\n@@ -64,8 +59,8 @@ const post: OpContainer = {\n \t\treturn client.request(opts);\n \t},\n \n-\tdelete: (client, execFns, itemIndex) => {\n-\t\tconst id = execFns.getNodeParameter('id', itemIndex) as string;\n+\tdelete: (client, state) => {\n+\t\tconst id = state.getParam('id');\n \t\tconst opts: OptionsWithUri = {\n \t\t\tmethod: 'DELETE',\n \t\t\turi: `/post/${id}`,\n@@ -77,32 +72,32 @@ const post: OpContainer = {\n \n const comment: OpContainer = {\n \n-\tcreate: (client, execFns, itemIndex) => {\n-\t\tconst postId = execFns.getNodeParameter('postId', itemIndex) as string;\n+\tcreate: (client, state) => {\n+\t\tconst postId = state.getParam('postId');\n \t\tconst opts: OptionsWithUri = {\n \t\t\tmethod: 'POST',\n-\t\t\tbody: execFns.getNodeParameter('additionalFields', itemIndex) as IDataObject,\n+\t\t\tbody: state.getParam('additionalFields'),\n \t\t\turi: `/post/${postId}/comment`,\n \t\t\tjson: true,\n \t\t}\n \t\treturn client.request(opts);\n \t},\n \n-\tupdate: (client, execFns, itemIndex) => {\n-\t\tconst postId = execFns.getNodeParameter('postId', itemIndex) as string;\n-\t\tconst id = execFns.getNodeParameter('id', itemIndex) as string;\n+\tupdate: (client, state) => {\n+\t\tconst postId = state.getParam('postId');\n+\t\tconst id = state.getParam('id');\n \t\tconst opts: OptionsWithUri = {\n \t\t\tmethod: 'PUT',\n-\t\t\tbody: execFns.getNodeParameter('additionalFields', itemIndex) as IDataObject,\n+\t\t\tbody: state.getParam('additionalFields'),\n \t\t\turi: `/post/${postId}/comment/${id}`,\n \t\t\tjson: true,\n \t\t}\n \t\treturn client.request(opts).then(res => res || {});\n \t},\n \n-\tget: (client, execFns, itemIndex) => {\n-\t\tconst postId = execFns.getNodeParameter('postId', itemIndex) as string;\n-\t\tconst id = execFns.getNodeParameter('id', itemIndex) as string;\n+\tget: (client, state) => {\n+\t\tconst postId = state.getParam('postId');\n+\t\tconst id = state.getParam('id');\n \t\tconst opts: OptionsWithUri = {\n \t\t\tmethod: 'GET',\n \t\t\turi: `/post/${postId}/comment/${id}`,\n@@ -111,8 +106,8 @@ const comment: OpContainer = {\n \t\treturn client.request(opts);\n \t},\n \n-\tgetAll:(client, execFns, itemIndex) => {\n-\t\tconst postId = execFns.getNodeParameter('postId', itemIndex) as string;\n+\tgetAll:(client, state) => {\n+\t\tconst postId = state.getParam('postId');\n \t\tconst opts: OptionsWithUri = {\n \t\t\tmethod: 'GET',\n \t\t\turi: `/post/${postId}/comment`,\n@@ -121,9 +116,9 @@ const comment: OpContainer = {\n \t\treturn client.request(opts);\n \t},\n \n-\tdelete: (client, execFns, itemIndex) => {\n-\t\tconst postId = execFns.getNodeParameter('postId', itemIndex) as string;\n-\t\tconst id = execFns.getNodeParameter('id', itemIndex) as string;\n+\tdelete: (client, state) => {\n+\t\tconst postId = state.getParam('postId');\n+\t\tconst id = state.getParam('id');\n \t\tconst opts: OptionsWithUri = {\n \t\t\tmethod: 'DELETE',\n \t\t\turi: `/post/${postId}/comment/${id}`,"}]}